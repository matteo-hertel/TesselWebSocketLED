<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <title>Tesselwebsocketled by Matteo Hertel</title>
</head>

<body>

    <header>
        <div class="container">
            <h1>Tesselwebsocketled</h1>
            <h2>Control LED with Tessel over WebSocket connection</h2>

            <section id="downloads">
                <a id="#ZipDownload" href="https://github.com/matteo-hertel/TesselWebSocketLED/zipball/master" class="btn">Download as .zip</a>
                <a id="#TarDownload" ref="https://github.com/matteo-hertel/TesselWebSocketLED/tarball/master" class="btn">Download as .tar.gz</a>
                <a id="#ViewOnGithub" href="https://github.com/matteo-hertel/TesselWebSocketLED" class="btn btn-github">
                    <span class="icon"></span>View on GitHub</a>
            </section>
        </div>
    </header>

    <div class="container">
        <!-- Google Tag Manager -->
        <noscript>
            <iframe src="//www.googletagmanager.com/ns.html?id=GTM-MJGWJC" height="0" width="0" style="display:none;visibility:hidden"></iframe>
        </noscript>
        <script>
        (function(w, d, s, l, i) {
            w[l] = w[l] || [];
            w[l].push({
                'gtm.start': new Date().getTime(),
                event: 'gtm.js'
            });
            var f = d.getElementsByTagName(s)[0],
                j = d.createElement(s),
                dl = l != 'dataLayer' ? '&l=' + l : '';
            j.async = true;
            j.src =
                '//www.googletagmanager.com/gtm.js?id=' + i + dl;
            f.parentNode.insertBefore(j, f);
        })(window, document, 'script', 'dataLayer', 'GTM-MJGWJC');
        </script>
        <!-- End Google Tag Manager -->

        <section id="main_content">
            <h3>
                <a id="history" class="anchor" href="#history" aria-hidden="true">
                    <span class="octicon octicon-link"></span>
                </a>History</h3>

            <p>I started this project because I was really impressed by another <a href="https://projects.tessel.io/projects/xmas-lights" target="_blank">Tessel project</a> I saw online, but to me something was missing, I wanted to be able to control the Tessel board from anywhere so I choose to use WebSocket to achieve that.</p>
            <h3>
                <a id="components" class="anchor" href="#components" aria-hidden="true">
                    <span class="octicon octicon-link"></span>
                </a>Components</h3>


            <p>There are 3 main components:</p>
            <ul>
                <li>Tessel</li>
                <li>Server</li>
                <li>Client</li>
            </ul>

            <h4>Tessel</h4>
            <p>The Tessel board is connected to the Server via Wi-Fi, it receives input and it will turn on the chosen pin based on the input</p>
            <h4>Server</h4>
            <p>The server can use any programming language, but me being a WebDeveloper I choose PHP.
                <br />Using a PHP WebSocket library called <a href="http://socketo.me/" target="_blank">Ratchet</a> was easy as pie set up the server, because of the limited amount of time I had to build this project I used the example from the documentation to set up a chat server and I used that as foundation for the input exchange
            </p>
            <h4>Client</h4>
            <p>There are two clients a web app and a mobile app:</p>
            <p>I borrowed some of the UI from the <a href="https://projects.tessel.io/projects" target="_blank">REST controlled Xmas lights project</a> (Thanks by the way) because was nice and clean, but I had a lot of functionality, once the web app was done I used PhoneGap to deploy the web app on my android device</p>

            <h3>
                <a id="how-it-works" class="anchor" href="#how-it-works" aria-hidden="true">
                    <span class="octicon octicon-link"></span>
                </a>How it works?</h3>


            <p>The whole flow is straightforward:</p>
            <ol>
                <li>The server is turned on, the clients can connect to the server and exchange data</li>
                <li>The Tessel once is on, will wait for the WiFi signal and will connect to the server, will turn on the first LED in the pool and will wait for input</li>
                <li>Any client can connect to the server and send data, the server will forward the input to the Tessel that will turn on the correct LED</li>
            </ol>
            <h3>
                <a id="setup" class="anchor" href="#setup" aria-hidden="true">
                    <span class="octicon octicon-link"></span>
                </a>Set Up</h3>
            <p>Set up the different components is really easy with package managers:</p>
            <h4>Server</h4>
            <p>The server can be either local or remote, you can fire a new Digital Ocean <a href="https://www.digitalocean.com/" target="_blank">droplet</a>, <a href="https://help.ubuntu.com/community/ApacheMySQLPHP" target="_blank">install apache and PHP</a> then install <a href="https://getcomposer.org/download/" target="_blank">composer</a> and finally launch the following commands:
                <pre>
                <code>
$ cd /var/www/html
$ git clone https://github.com/matteo-hertel/TesselWebSocketLED.git
$ cd TesselWebSocketLED/backend
$ composer install
$ php app.php
				</code></pre>
                <p>The server is now ready, just take a note somewhere of the IP address</p>
                <h4>Tessel</h4>
                First of all the Tessel must be connected through the <a href="http://start.tessel.io/wifi" target="_blank">WiFi</a> then once the Tessel is connected via USB to you machine just type:
                <pre>
                <code>
$ git clone https://github.com/matteo-hertel/TesselWebSocketLED.git
$ cd TesselWebSocketLED/hardware
$ npm install
				</code></pre>


                <p>Now you can either execute the code into tessel's memory or flash it permanently</p>
                <p>To run it in memory</p>
                <pre>
                <code>
$ tessel run hardware.js
				</code></pre>
                <p>To flash it permanently</p>
                <pre>
                <code>
$ tessel push hardware.js
				</code></pre>

                <h4>Client</h4>
                <p>The webapp can be hosted anywhere, I chose AWS S3, the mobile app needs phonegap and some work, I'll make a video if a lot of user can't figure it out</p>

                <p>That's it, enjoy!</p>


                <h3>
                    <a id="authors-and-contributors" class="anchor" href="#authors-and-contributors" aria-hidden="true">
                        <span class="octicon octicon-link"></span>
                    </a>Authors and Contributors</h3>

                <p>I'm Matteo Hertel (<a href="https://github.com/matteo-hertel" target="_blank" class="user-mention">@matteo-hertel</a>), I'm a 23 years old Web Developer from London, you can follow me here on GitHub or on twitter (<a href="https://twitter.com/M4tt3H" target="_blank" class="user-mention">@M4tt3H</a>)</p>

                <h3>
                    <a id="support-or-contact" class="anchor" href="#support-or-contact" aria-hidden="true">
                        <span class="octicon octicon-link"></span>
                    </a>Support or Contact</h3>

                <p>For any bug or support please use the <a href="https://github.com/matteo-hertel/TesselWebSocketLED/issues" target="_blank">GitHub issue tracker</a>, also pull request are more than welcome!</p>
        </section>
    </div>

    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
        var pageTracker = _gat._getTracker("UA-58942746-1");
        pageTracker._trackPageview();
    } catch (err) {}
    </script>

</body>

</html>
